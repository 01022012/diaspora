-#   Copyright (c) 2010, Diaspora Inc.  This file is
-#   licensed under the Affero General Public License version 3 or later.  See
-#   the COPYRIGHT file.

- content_for :head do
  = include_javascripts :home

.span-5.leftNavBar
  #home_user_badge
    = owner_image_link
    %h3
      = current_user.first_name

  .section
    %ul.left_nav
      %li
        = link_to "Welcome", getting_started_path, :class => "home_selector active"

  .section
    = render 'aspects/aspect_listings'

  .section
    = render 'tags/followed_tags_listings'

.span-13.append-1
  .stream_container
    %h2
      = "Welcome, #{current_user.first_name}!"

    %ul#getting_started
      %li.profile
        .getting_started_number
          %h3
            1
        .content
          #getting_started_profile_photo
            = person_image_link(current_user.person, :size => :thumb_medium)
          %h3
            = t(".fill_out_your_profile")
          %p
            = t(".profile_description")
          .span-8.fields
            - [:full_name, :image_url, :birthday, :gender, :bio, :location, :tag_string].each do |attr|
              .span-4.last
                = profile_field_tag(current_user.person.profile, attr)

          #edit_profile_button_div
            = link_to "Edit Profile", edit_profile_path, :class => "button"

      %li.services
        .getting_started_number
          %h3
            2
        .content
          %h3
            = t('.connect_to_your_other_social_networks')
        #getting_started_service_icons
          - AppConfig.configured_services.each do |service|
            - unless current_user.services.any?{|x| x.provider == service}
              = link_to(image_tag("social_media_logos/#{service.downcase}-48x48.png", :title => service.titleize), "/auth/#{service}")

      %li
        .getting_started_number
          %h3
            3
        .content
          %h3
            = t(".connect_with_people")

          %p
            Connect with people by placing them into one or more of your aspects.  Aspects are an intuative way to group new and familar faces, allowing you to filter down or share with subsets of your contacts easily.

          #diaspora_hq_pane
            - person = Person.find_by_diaspora_handle("diasporahq@joindiaspora.com")
            = person_image_link(person, :size => :thumb_medium)

            .name
              = person_link(person)

            .info
              Get updates about the project from the core team.

            .add_to_aspect
              = render :partial => 'people/relationship_action',
                :locals => { :person => person,
                              :contact => current_user.contact_for(person),
                              :current_user => current_user }

          #featured_users_pane 
            %h4
              Featured users

            %div
              - Person.featured_users[0..5].each do |person|
                .featured_user_card_small
                  = person_image_link(person)
                  = link_to person.name, person_path(person)
                  - person.profile.tags[0..2].each do |tg|
                    = "##{tg}"

            = link_to "See all featured users ->", "#"

          %br
          #find_friends_pane
            %h4
              Find friends
            .span-5.append-1
              #global_search
                = form_tag(people_path, :method => 'get', :id => "global_search_form") do
                  = text_field_tag 'q', nil, :placeholder => "Search for people", :type => 'search', :results => 5
            .span-5.last
              %p
                or
                = link_to "find friends from Facebook", "#"
            .clearfix
            %br

      %li
        .getting_started_number
          %h3
            4
        .content
          %h3
            = t(".follow_your_interests")

          %p
            Hashtags allow you to talk about and follow your interests.  They're also a great way to find new people on Diaspora.

          .span-5.append-1
            #global_search
              = form_tag(people_path, :method => 'get', :id => "global_search_form") do
                = text_field_tag 'q', nil, :placeholder => "Search for #hashtags", :type => 'search', :results => 5
          .span-5.last
            %h4
              Featured tags
            %p
              = link_to "#diaspora", "#"
              %br
              = link_to "#kittens", "#"
              %br
              = link_to "#puppies", "#"
              %br
              = link_to "#maddog", "#"
          .clearfix
            %br
          %br

      %li
        .getting_started_number
          %h3
            5
        .content
          %h3
            = t(".connect_to")
            = link_to "Cubbi.es", "http://cubbi.es/"
          %p
            = t('tokens.show.what_is_cubbies')

          .cubbies_images
            = image_tag '/images/cubbies_collage.png', :width => 422, :height => 159, :class => "cubbies_collage_small"
            = image_tag '/images/cubbies_screenshot2.png', :height => 151, :width => 200, :class => "cubbies_user_page_small"

.span-5.rightBar.last
  /= render 'selected_contacts', :people => @selected_people.sample(20), :count => @contact_count
  /= render 'shared/right_sections'
