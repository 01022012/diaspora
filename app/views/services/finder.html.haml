-#   Copyright (c) 2010, Diaspora Inc.  This file is
-#   licensed under the Affero General Public License version 3 or later.  See
-#   the COPYRIGHT file.

- content_for :head do
  = include_javascripts :finder

#section_header
  %h2
    = t('contacts.index.title')

= render 'shared/contact_sidebar'

.span-18.last
  %h3
    = t('.service_friends', :service => params[:provider].titleize)
  #people_stream.stream.contacts
    - if @friends.size > 0
      - for friend in @friends
        .stream_element{:id => friend.id}
          .right

            - if friend.already_invited?
              = link_to t('.resend'), service_inviter_path(:uid => friend.uid, :provider => 'facebook', :invitation_id => friend.invitation_id)
            - elsif friend.on_diaspora?
              = render 'aspect_memberships/aspect_dropdown', :contact => contact_proxy(friend), :person => friend.person, :hang => 'left'
            - else
              = facebook_invite_form(friend)

          - if friend.on_diaspora?
            = person_image_link(friend.person, :size => :thumb_small)
          - else
            = image_tag(friend.photo_url, :class => 'avatar')

          .content
            %span.from
              - if friend.on_diaspora?
                = link_to friend.name, person_path(friend.person)
              - else
                = friend.name

              
            .info
              - if friend.person
                = friend.person.diaspora_handle
              - else
                not yet on diaspora

      /= will_paginate @friends
    - else
      %h3.no_contacts
        = t('.no_friends')

